<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Vail Adapter Button Hat - User Guide</title>
    <style>
        @page {
            size: letter;
            margin: 0.75in;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            font-size: 11pt;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 0;
            font-size: 28pt;
        }
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #95a5a6;
            padding-bottom: 8px;
            margin-top: 30px;
            font-size: 18pt;
            page-break-after: avoid;
        }
        h3 {
            color: #34495e;
            margin-top: 20px;
            font-size: 14pt;
            page-break-after: avoid;
        }
        p {
            margin: 10px 0;
            text-align: justify;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }
        li {
            margin: 5px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 15px 0;
            page-break-inside: avoid;
        }
        th, td {
            border: 1px solid #bdc3c7;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #ecf0f1;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 10pt;
        }
        pre {
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            page-break-inside: avoid;
        }
        pre code {
            background-color: transparent;
            padding: 0;
        }
        strong {
            color: #2c3e50;
        }
        hr {
            border: none;
            border-top: 2px solid #ecf0f1;
            margin: 25px 0;
        }
        blockquote {
            border-left: 4px solid #3498db;
            padding-left: 20px;
            margin-left: 0;
            font-style: italic;
            color: #555;
        }
        .page-break {
            page-break-before: always;
        }
    </style>
</head>
<body>
<h1>Vail Adapter Button Hat - User Guide</h1>
<p>Welcome to your Vail Adapter with Button Hat! This guide will help you get started with the three-button interface that lets you adjust settings without using a computer.</p>
<hr />
<h2>What Can the Buttons Do?</h2>
<p>The button hat gives you control over settings and memory functions:</p>
<p><strong>Settings:</strong>
- <strong>Speed</strong> - Adjust your keyer speed (5-40 WPM)
- <strong>Tone</strong> - Change your sidetone frequency (42 different pitches)
- <strong>Key Type</strong> - Switch between Straight Key, Iambic A, and Iambic B modes</p>
<p><strong>Memory:</strong>
- <strong>Record</strong> - Capture CW sequences up to 25 seconds in 3 memory slots
- <strong>Playback</strong> - Send recorded messages via keyboard/MIDI/radio or preview via piezo
- <strong>Clear</strong> - Erase individual memory slots</p>
<p>All feedback is through Morse code and tones played on your piezo buzzer!</p>
<hr />
<h2>Button Layout</h2>
<p>When looking down at your Vail Adapter from above (button side up), with the USB port on the left:</p>
<pre><code>       USB  [1]  [2]  [3]


</code></pre>
<ul>
<li><strong>Button 1</strong> (Leftmost, closest to USB) - Speed settings</li>
<li><strong>Button 2</strong> (Middle) - Tone settings</li>
<li><strong>Button 3</strong> (Rightmost, furthest from USB) - Key type settings</li>
</ul>
<hr />
<h2>Understanding Button Presses</h2>
<p>There are two types of button presses you'll use:</p>
<h3>Quick Press</h3>
<p>Press and release quickly (less than 1 second)
- Used to adjust values up or down</p>
<h3>Long Press</h3>
<p>Hold for 2 seconds until you hear audio feedback
- Used to enter settings modes or save changes
- You can release the button once you hear the announcement</p>
<hr />
<h2>Quick Reference Card</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th>What It Does</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hold Button 1</strong> (2 sec)</td>
<td>Enter Speed Mode - hear "SPEED"</td>
</tr>
<tr>
<td><strong>Hold Button 2</strong> (2 sec)</td>
<td>Enter Tone Mode - hear "TONE"</td>
</tr>
<tr>
<td><strong>Hold Button 3</strong> (2 sec)</td>
<td>Enter Key Type Mode - hear "KEY"</td>
</tr>
<tr>
<td><strong>Hold Buttons 1+3</strong> (2 sec)</td>
<td>Enter Memory Management Mode - hear "MEM"</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>In any setting mode:</strong></td>
<td></td>
</tr>
<tr>
<td>Quick press Button 1</td>
<td>Increase value</td>
</tr>
<tr>
<td>Quick press Button 3</td>
<td>Decrease value</td>
</tr>
<tr>
<td><strong>Hold Button 2</strong> (2 sec)</td>
<td>Save and exit - hear "RR"</td>
</tr>
<tr>
<td>Wait 30 seconds</td>
<td>Auto-save and exit - hear descending tones</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>In memory management mode:</strong></td>
<td></td>
</tr>
<tr>
<td>Single-click Button 1/2/3</td>
<td>Play memory (piezo only)</td>
</tr>
<tr>
<td>Double-click Button 1/2/3</td>
<td>Start recording to that slot</td>
</tr>
<tr>
<td><strong>Hold Button 1/2/3</strong> (2 sec)</td>
<td>Clear that memory slot</td>
</tr>
<tr>
<td><strong>Hold Buttons 1+3</strong> (2 sec)</td>
<td>Exit memory mode</td>
</tr>
</tbody>
</table>
<hr />
<h2>How to Adjust Speed (WPM)</h2>
<p>Speed controls how fast your keyer sends code, from 5 WPM (slow) to 40 WPM (fast).</p>
<p><strong>Step by step:</strong></p>
<ol>
<li><strong>Hold Button 1</strong> for 2 seconds</li>
<li>
<p>When you hear "SPEED" in Morse, release the button</p>
</li>
<li>
<p><strong>Adjust the speed:</strong></p>
</li>
<li><strong>Button 1</strong> (quick press) = Increase speed by 1 WPM</li>
<li><strong>Button 3</strong> (quick press) = Decrease speed by 1 WPM</li>
<li>Each adjustment plays a beep (higher pitch for increase, lower for decrease)</li>
<li>
<p><strong>Try it out!</strong> Use your paddle to test the new speed</p>
</li>
<li>
<p><strong>When you hit the limits:</strong></p>
</li>
<li>Minimum is 5 WPM, maximum is 40 WPM</li>
<li>
<p>If you try to go beyond, you'll hear a low buzz error tone</p>
</li>
<li>
<p><strong>Save your new speed:</strong></p>
</li>
<li><strong>Hold Button 2</strong> for 2 seconds</li>
<li>When you hear "RR" in Morse, release the button</li>
<li>You're back to normal mode with your new speed saved!</li>
</ol>
<p><strong>OR</strong> just wait 30 seconds - it will auto-save and you'll hear descending tones.</p>
<hr />
<h2>How to Adjust Tone (Sidetone Frequency)</h2>
<p>Tone controls the pitch of your sidetone when keying.</p>
<p><strong>Step by step:</strong></p>
<ol>
<li><strong>Hold Button 2</strong> for 2 seconds</li>
<li>
<p>When you hear "TONE" in Morse, release the button</p>
</li>
<li>
<p><strong>Adjust the tone:</strong></p>
</li>
<li><strong>Button 1</strong> (quick press) = Higher pitch</li>
<li><strong>Button 3</strong> (quick press) = Lower pitch</li>
<li>Each adjustment plays a 100ms beep at the NEW frequency</li>
<li>
<p><strong>Try it out!</strong> Use your paddle to hear the new tone</p>
</li>
<li>
<p><strong>When you hit the limits:</strong></p>
</li>
<li>There are 42 different tones available (middle range of frequencies)</li>
<li>
<p>If you try to go beyond either end, you'll hear a low buzz error tone</p>
</li>
<li>
<p><strong>Save your new tone:</strong></p>
</li>
<li><strong>Hold Button 2</strong> for 2 seconds</li>
<li>When you hear "RR" in Morse, release the button</li>
<li>You're back to normal mode with your new tone saved!</li>
</ol>
<p><strong>OR</strong> just wait 30 seconds - it will auto-save and you'll hear descending tones.</p>
<hr />
<h2>How to Change Key Type</h2>
<p>Key type controls how your paddle input is processed.</p>
<p><strong>The three key types:</strong>
- <strong>Straight (S)</strong> - Acts like a straight key, no automatic timing
- <strong>Iambic A (IA)</strong> - Automatic alternating dits and dahs
- <strong>Iambic B (IB)</strong> - Like Iambic A with squeeze timing (most popular!)</p>
<p><strong>Step by step:</strong></p>
<ol>
<li><strong>Hold Button 3</strong> for 2 seconds</li>
<li>
<p>When you hear "KEY" in Morse, release the button</p>
</li>
<li>
<p><strong>Cycle through key types:</strong></p>
</li>
<li><strong>Button 1</strong> (quick press) = Next type forward</li>
<li><strong>Button 3</strong> (quick press) = Previous type backward</li>
<li>You'll hear the type identifier in Morse:<ul>
<li><strong>S</strong> = ... (dit dit dit) for Straight</li>
<li><strong>IA</strong> = .. .- (I then A) for Iambic A</li>
<li><strong>IB</strong> = .. -... (I then B) for Iambic B</li>
</ul>
</li>
<li>
<p><strong>Try it out!</strong> Use your paddle to test the keyer behavior</p>
</li>
<li>
<p><strong>Cycling order:</strong></p>
</li>
<li>Forward: Straight → Iambic A → Iambic B → Straight...</li>
<li>
<p>Backward: Straight → Iambic B → Iambic A → Straight...</p>
</li>
<li>
<p><strong>Save your key type:</strong></p>
</li>
<li><strong>Hold Button 2</strong> for 2 seconds</li>
<li>When you hear "RR" in Morse, release the button</li>
<li>You're back to normal mode with your new key type saved!</li>
</ol>
<p><strong>OR</strong> just wait 30 seconds - it will auto-save and you'll hear descending tones.</p>
<hr />
<h2>CW Memory - Record and Playback</h2>
<p>Your Vail Adapter has <strong>three memory slots</strong> that can store CW sequences up to 25 seconds each. You can record your own CQ, contest exchanges, or any other frequently-used messages!</p>
<h3>Memory Management Mode</h3>
<p>To work with memories, you first need to enter Memory Management Mode:</p>
<ol>
<li><strong>Hold Buttons 1+3 together</strong> for 2 seconds</li>
<li>When you hear "MEM" in Morse, release the buttons</li>
<li>
<p>You're now in Memory Management Mode</p>
</li>
<li>
<p><strong>In this mode:</strong></p>
</li>
<li><strong>Single-click</strong> any button (1, 2, or 3) = Play that memory via piezo only</li>
<li><strong>Double-click</strong> any button (1, 2, or 3) = Start recording to that slot</li>
<li>
<p><strong>Long-press</strong> any button (1, 2, or 3) = Clear that memory slot</p>
</li>
<li>
<p><strong>Exit Memory Management Mode:</strong></p>
</li>
<li><strong>Hold Buttons 1+3 together</strong> again for 2 seconds</li>
<li>Or wait 30 seconds for auto-exit</li>
</ol>
<h3>Recording to a Memory Slot</h3>
<p><strong>Step by step:</strong></p>
<ol>
<li>
<p><strong>Enter Memory Management Mode</strong> (hold Buttons 1+3)</p>
</li>
<li>
<p><strong>Double-click</strong> the button for your desired slot:</p>
</li>
<li>Button 1 = Memory Slot 1</li>
<li>Button 2 = Memory Slot 2</li>
<li>
<p>Button 3 = Memory Slot 3</p>
</li>
<li>
<p><strong>Listen for the countdown:</strong> "doot, doot, dah" (3 beeps)</p>
</li>
<li>
<p><strong>Send your CW</strong> using your paddle or straight key</p>
</li>
<li>Recording starts immediately after the countdown</li>
<li>You'll hear the sidetone as you key</li>
<li><strong>Note:</strong> Only the timing is recorded - NO MIDI/keyboard/radio output during recording</li>
<li>
<p>Maximum recording time: 25 seconds</p>
</li>
<li>
<p><strong>Stop recording:</strong></p>
</li>
<li><strong>Single-click</strong> the same button you used to start</li>
<li>You'll hear two confirmation beeps</li>
<li>Recording is automatically saved to EEPROM</li>
<li>You're back in Memory Management Mode</li>
</ol>
<p><strong>Auto-stop:</strong> If you reach 25 seconds, recording stops automatically with three beeps (low, high, high).</p>
<h3>Playing Back a Memory</h3>
<p>There are two ways to play back a memory:</p>
<h4>Playback in Memory Management Mode (Piezo Only)</h4>
<ol>
<li><strong>Enter Memory Management Mode</strong> (hold Buttons 1+3)</li>
<li><strong>Single-click</strong> the button for the memory you want to hear (1, 2, or 3)</li>
<li>Playback through the piezo buzzer only - perfect for previewing!</li>
</ol>
<h4>Playback in Normal Mode (via Current Output)</h4>
<ol>
<li><strong>Exit Memory Management Mode</strong> (or don't enter it)</li>
<li><strong>Single-click</strong> the button for the memory you want to send (1, 2, or 3)</li>
<li>Playback goes through your <strong>current output mode</strong>:</li>
<li>Keyboard mode → Sends keystrokes to computer</li>
<li>MIDI mode → Sends MIDI notes</li>
<li>Radio mode → Keys your radio output pins</li>
<li><strong>Plus</strong> piezo sidetone (if buzzer enabled)</li>
</ol>
<p>This is perfect for sending CQ or contest exchanges hands-free!</p>
<h3>Clearing a Memory Slot</h3>
<ol>
<li><strong>Enter Memory Management Mode</strong> (hold Buttons 1+3)</li>
<li><strong>Long-press</strong> the button for the slot you want to clear (2 seconds)</li>
<li>You'll hear the memory number followed by "CLR" in Morse</li>
<li>That memory slot is now empty</li>
</ol>
<h3>Memory Slot Quick Reference</h3>
<table>
<thead>
<tr>
<th>Button</th>
<th>Memory Slot</th>
<th>What It Stores</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Button 1</strong></td>
<td>Slot 1</td>
<td>Up to 25 seconds of CW timing</td>
</tr>
<tr>
<td><strong>Button 2</strong></td>
<td>Slot 2</td>
<td>Up to 25 seconds of CW timing</td>
</tr>
<tr>
<td><strong>Button 3</strong></td>
<td>Slot 3</td>
<td>Up to 25 seconds of CW timing</td>
</tr>
</tbody>
</table>
<h3>Memory Tips</h3>
<p><strong>Recording Quality:</strong>
- Your recordings capture the <strong>exact timing</strong> of your keying
- All keyer features work during recording (iambic squeeze, etc.)
- The recording is trimmed to remove trailing silence</p>
<p><strong>Persistence:</strong>
- All three memory slots are saved to EEPROM
- They survive power cycles
- Each slot is independent</p>
<p><strong>Testing Your Recording:</strong>
- After recording, single-click the same button to preview via piezo
- If you don't like it, just double-click to record over it
- Or long-press to clear and start fresh</p>
<p><strong>Field Use:</strong>
- Record your CQ at home
- In the field, just single-click to send it via radio/MIDI/keyboard
- No computer needed!</p>
<hr />
<h2>Audio Feedback Guide</h2>
<p>All feedback comes through your piezo buzzer in Morse code and tones.</p>
<h3>Morse Announcements</h3>
<table>
<thead>
<tr>
<th>Sound</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>"SPEED"</td>
<td>Entered speed setting mode</td>
</tr>
<tr>
<td>"TONE"</td>
<td>Entered tone setting mode</td>
</tr>
<tr>
<td>"KEY"</td>
<td>Entered key type mode</td>
</tr>
<tr>
<td>"MEM"</td>
<td>Entered memory management mode</td>
</tr>
<tr>
<td>"RR"</td>
<td>Settings saved, returning to normal mode</td>
</tr>
<tr>
<td>"S" (dit dit dit)</td>
<td>Straight key mode</td>
</tr>
<tr>
<td>"IA" (I then A)</td>
<td>Iambic A mode</td>
</tr>
<tr>
<td>"IB" (I then B)</td>
<td>Iambic B mode</td>
</tr>
<tr>
<td>"[1/2/3] CLR"</td>
<td>Memory slot cleared</td>
</tr>
</tbody>
</table>
<h3>Special Tones</h3>
<table>
<thead>
<tr>
<th>Sound</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Short beep (higher pitch)</td>
<td>Increased a setting</td>
</tr>
<tr>
<td>Short beep (lower pitch)</td>
<td>Decreased a setting</td>
</tr>
<tr>
<td>Low buzz (200 Hz)</td>
<td>Error - you hit the minimum or maximum limit</td>
</tr>
<tr>
<td>Descending tones (7 steps)</td>
<td>Auto-save timeout - settings saved</td>
</tr>
<tr>
<td>100ms beep at new frequency</td>
<td>New tone frequency preview (in tone mode)</td>
</tr>
<tr>
<td>"doot, doot, dah" (3 beeps)</td>
<td>Recording countdown - get ready to key!</td>
</tr>
<tr>
<td>Two confirmation beeps</td>
<td>Recording saved successfully</td>
</tr>
<tr>
<td>Three beeps (low, high, high)</td>
<td>Recording auto-stopped at 25 seconds</td>
</tr>
</tbody>
</table>
<hr />
<h2>Tips &amp; Tricks</h2>
<h3>Testing While Adjusting</h3>
<p>Unlike other CW devices, you can <strong>test while you adjust</strong>:
- In Speed Mode: Key with your paddle to hear the new speed
- In Tone Mode: Key with your paddle to hear the new tone
- In Key Type Mode: Key with your paddle to test the keyer behavior</p>
<p>Changes take effect immediately, so you can find the perfect setting before saving!</p>
<h3>Activity Timeout</h3>
<p>The 30-second auto-save timer resets whenever you:
- Press any button
- Use your paddle or straight key</p>
<p>So feel free to take your time testing different settings!</p>
<h3>What Gets Saved</h3>
<p>All three settings are saved to EEPROM and survive power cycles:
- Your speed (WPM)
- Your tone (frequency)
- Your key type (Straight/Iambic A/Iambic B)</p>
<h3>Starting From Scratch</h3>
<p>If you ever want to know your current settings:
- Enter each mode (the announcement plays at your current setting)
- Speed: Watch the serial monitor for "Current speed: XX WPM"
- Tone: Watch for "Current tone: MIDI note XX (XXX Hz)"
- Key Type: Watch for "Current keyer type: [name]"</p>
<h3>No Computer Needed</h3>
<p>Once you're comfortable with the buttons, you can adjust all three settings without ever connecting to a computer. Perfect for field operations or portable setups!</p>
<hr />
<h2>Troubleshooting</h2>
<p><strong>Problem:</strong> Buttons don't seem to respond
- Make sure you're holding long enough (2 seconds for mode entry)
- Wait for the audio announcement before releasing
- Try a single button at a time first</p>
<p><strong>Problem:</strong> I'm not hearing any audio feedback
- Check that your piezo buzzer is connected
- Verify you haven't disabled the buzzer (hold DIT for 5 seconds re-enables it)</p>
<p><strong>Problem:</strong> Settings don't save
- Make sure you either hold Button 2 for "RR" confirmation
- Or wait for the descending tones (30-second auto-save)
- If you exit accidentally (power loss), changes are NOT saved</p>
<p><strong>Problem:</strong> I don't know which mode I'm in
- Just wait - if you don't press anything for 30 seconds, you'll auto-exit
- Or try entering a mode - you can always save without changing anything</p>
<p><strong>Problem:</strong> Speed or tone is at the wrong limit
- Press the opposite button to move away from the limit
- Speed range: 5-40 WPM
- Tone range: MIDI notes 43-85 (42 different tones)</p>
<hr />
<h2>Default Settings</h2>
<p>When you first flash the firmware or reset EEPROM:
- <strong>Speed:</strong> 12 WPM
- <strong>Tone:</strong> MIDI note 69 (440 Hz - concert A)
- <strong>Key Type:</strong> Iambic B</p>
<hr />
<h2>Summary Cheat Sheet</h2>
<pre><code>MODE ENTRY (hold 2 seconds):
├─ Button 1 → Speed Mode   (&quot;SPEED&quot;)
├─ Button 2 → Tone Mode    (&quot;TONE&quot;)
├─ Button 3 → Key Type Mode (&quot;KEY&quot;)
└─ Buttons 1+3 → Memory Management Mode (&quot;MEM&quot;)

IN ANY SETTING MODE:
├─ Button 1 (quick) → Increase
├─ Button 3 (quick) → Decrease
├─ Button 2 (hold 2s) → Save &amp; exit (&quot;RR&quot;)
└─ Wait 30s → Auto-save (descending tones)

IN MEMORY MANAGEMENT MODE:
├─ Single-click 1/2/3 → Play memory (piezo only)
├─ Double-click 1/2/3 → Record to that slot
├─ Hold 1/2/3 (2s) → Clear that slot
└─ Hold 1+3 (2s) → Exit memory mode

IN NORMAL MODE:
└─ Single-click 1/2/3 → Play memory via current output (keyboard/MIDI/radio)

TEST WHILE ADJUSTING:
└─ Use your CW paddle to test immediately!
</code></pre>
<hr />
<h2>Getting Help</h2>
<p>If you have questions or run into issues:
- Check the serial monitor (9600 baud) for detailed feedback
- Review this guide for step-by-step instructions
- Make sure your firmware is up to date</p>
<p><strong>Happy keying! 73</strong></p>
</body>
</html>